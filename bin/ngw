#!/usr/bin/env node
switch (process.argv[2]) {
  case '--set-up':
    require('../lib/set-up');
    break;
  default:

    const execSync = require('child_process').execSync;
    const entryPointPath = require.resolve('../lib/index');
    const tsNodePath = require.resolve('ts-node/register');
    const commandArgs = process.argv.slice(2);
    const ngCommandArgs = [];
    const nodeCommandArgs = [];
    for(let i = 0; i< commandArgs.length; i++) {
      if(commandArgs[i] === '--'){
        nodeCommandArgs.push(commandArgs[++i]);
      } else {
        ngCommandArgs.push(commandArgs[i]);
      }
    }
    const executionPoint = [tsNodePath, ...nodeCommandArgs, entryPointPath, ...ngCommandArgs].join('" "');
    execSync(`node -r "${executionPoint}"`, {stdio: 'inherit'});

}
